<html
        xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
        xmlns:ieb="http://typo3.org/ns/GeorgRinger/Ieb/ViewHelpers"
        xmlns:pdf="http://typo3.org/ns/Bithost/Pdfviewhelpers/ViewHelpers"
        data-namespace-typo3-fluid="true">
<f:layout name="Default"/>

<f:section name="content">
    <pdf:document
            title="{ansuchen.nummer} {ansuchen.akkreditierungEntscheidungDatum -> f:format.date(format:'Y-m-d')} <f:translate key='ansuchen.status.{ansuchen.status}'/>"
            outputPath=".pdf"
            outputDestination="inline"
            sourceFile="EXT:ieb/Resources/Private/Pdfs/esf.pdf">

        <pdf:page importPage="1" margin="{top: 35, right: 16, bottom: 30, left: 16}">
            <pdf:html>

            <style>
                p {font-family: "opensans", sans-serif;font-size: 10.5pt;}
            </style>

            <h2 style="font-family: opensans; color:#c31a1e; font-size: 13pt; line-height:30pt;">Personal- und Standorteliste f√ºr {ansuchen.nummer} ({ansuchen.name})</h2>


                <f:for each="{versions}" as="version" iteration="i">
                    {version.copyTrainerData -> f:variable(name: 'trainer')}
                    {version.copyBeraterData -> f:variable(name: 'berater')}
                    {version.copyStandorteData -> f:variable(name: 'standorte')}
                    <table style="page-break-inside: avoid;">
                        <tr>
                            <td style="font-family: opensans;line-height:200%;border-top:solid 0.7mm #777;" colspan="2">{version.akkreditierungEntscheidungDatum -> f:format.date(format:'d.m.Y')} bis <f:if condition="{versions.{i.cycle}.uid}">
                                    <f:then>
                                        {versions.{i.cycle}.akkreditierungEntscheidungDatum ->
                                        f:format.date(format:'d.m.Y')}
                                    </f:then>
                                    <f:else>
                                        aktuell
                                    </f:else>
                                </f:if>
                                <span style="font-size: 8pt;">(<f:switch expression="{version.status}"><f:case value="100">akkreditiert</f:case><f:case value="140">akkreditiert mit Auflagen</f:case></f:switch>) [Version {version.version + 1}]</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 3cm;font-family: opensans;font-size: 10pt;">Training</td>
                            <td style="font-family: opensans;font-size: 10pt;">
                                <f:for each="{trainer}" as="t">
                                    {t.fullName} <br>
                            </f:for>
                            </td>
                        </tr>
                        <tr>
                            <td style="font-family: opensans;font-size: 10pt;">Beratung</td>
                            <td style="font-family: opensans;font-size: 10pt;">
                                <f:for each="{berater}" as="t">
                                    {t.fullName} <br>
                                </f:for>
                            </td>
                        </tr>
                        <tr>
                            <td style="font-family: opensans;font-size: 10pt;">Standorte</td>
                            <td style="font-family: opensans;font-size: 10pt;">
                                <f:for each="{standorte}" as="t">
                                {t.name} <span style="font-size:7pt;">({t.adresse}, {t.plz} {t.ort})</span> <br>
                                </f:for>
                            </td>
                        </tr>
                    </table>
                </f:for>

            </pdf:html>
        </pdf:page>
    </pdf:document>
</f:section>

</html>