<html
        xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
        xmlns:ieb="http://typo3.org/ns/GeorgRinger/Ieb/ViewHelpers"
        data-namespace-typo3-fluid="true">
<f:layout name="Default" />


<f:section name="content">


    <f:link.action action="new" class="formlink standorte">Neuen Standort anlegen</f:link.action>

    <f:if condition="{standorts}">
        <table class="tx_ieb standortliste">
            <f:for each="{standorts}" as="standort">
                <f:variable name="relationUsages">{ieb:relationUsed(object: standort)}</f:variable>
                <f:if condition="!{standort.archiviert}">
                    <f:then>
                        <tr>
                            <td class="fett">
                                {standort.name}
                            </td>
                            <td class="klein">
                                <f:format.raw>{standort.adresse}</f:format.raw><br> {standort.plz} {standort.ort}
                            </td>
                            <td class="td-knopf">

                                <f:if condition="{relationUsages}">
                                    <f:then>
                                        <div class="locked-grey knopf-quadratisch" title="Wird verwendet in: <br><f:for each='{relationUsages}' as='relationUsage'>
                                            {relationUsage.nummer} ({relationUsage.name})<br>
                                        </f:for>"></div>
                                    </f:then>
                                    <f:else>
                                        <f:link.action action="archive" title="Datensatz archivieren" class="knopf-quadratisch hide" arguments="{standort : standort}">
                                </f:link.action>
                                    </f:else>
                                </f:if>

                            </td>
                        </tr>
                    </f:then>
                    <f:else>
                        {f:variable(name: 'archiviertexistiert', value: 'ja')}
                    </f:else>
                </f:if>
            </f:for>
        </table>
        <div class="formzeile">
            <f:link.action action="new" class="formlink standorte">Neuen Standort anlegen</f:link.action>
        </div>
        <f:if condition="{archiviertexistiert}=='ja'">
            <div class="abstand-mittel"></div>
            <div class="archiv">
                <h2>ARCHIV</h2>
                <table class="tx_ieb standortliste">
                    <f:for each="{standorts}" as="standort">
                        <f:if condition="{standort.archiviert}">
                            <tr>
                                <td class="fett">
                                    {standort.name}
                                </td>
                                <td class="klein">
                                    {standort.adresse}<br> {standort.plz} {standort.ort}
                                </td>
                                <td class="td-knopf">
                                    <f:link.action action="revive" title="Datensatz wieder hinzufÃ¼gen" class="knopf-quadratisch revive" arguments="{standort : standort}">
                                    </f:link.action>
                                </td>
                            </tr>
                        </f:if>
                    </f:for>
                </table>
            </div>
        </f:if>
    </f:if>
    <div class="abstand-gross"></div>

</f:section>

</html>