<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Default" />

<f:section name="content">
    <f:if condition="{usedInAnsuchen -> f:count()}">
        <div style="border:1px solid red;">
            <strong>Folgende Ansuchen sind offen und verwenden die Stammdaten!!!</strong>
            <!-- todo beim speichern werden ansuchen nicht geÃ¤ndert, ich denke
            das ist keine gute idee ... -->
            <ul>
                <f:for each="{usedInAnsuchen}" as="ansuchen">
                    <li>{ansuchen.name}</li>
                </f:for>
            </ul>
        </div>
    </f:if>
    <f:render partial="FormErrors" />
    <f:if condition="{exists}">
        <f:then>
            <f:if condition="{locked}">
                <f:then>
                    <f:form action="update" name="stammdaten" object="{stammdaten}" class="formStammdaten editStammdaten" enctype="multipart/form-data">
                        <f:render partial="Stammdaten/FormFields" arguments="{stammdaten:stammdaten}" />
                        <f:form.submit value="Speichern" class="knopf-s" />
                    </f:form>
                    <script>
                        validieren();
                    </script>
                </f:then>
                <f:else>
                    <f:render partial="Stammdaten/Properties" arguments="{stammdaten:stammdaten}" />
                </f:else>
            </f:if>
            
        </f:then>
        <f:else>
            <f:form action="create" name="newStammdaten" object="{stammdaten}" class="formStammdaten newStammdaten" enctype="multipart/form-data">
                <f:render partial="Stammdaten/FormFields" arguments="{stammdaten:stammdaten}" />
                <f:form.submit value="Speichern" class="knopf-s" />
            </f:form>
        </f:else>
    </f:if>
</f:section>

</html>