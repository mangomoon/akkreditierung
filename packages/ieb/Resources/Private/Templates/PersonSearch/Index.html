<html
        xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
        xmlns:ieb="http://typo3.org/ns/GeorgRinger/Ieb/ViewHelpers"
        data-namespace-typo3-fluid="true">
<f:layout name="Default"/>

<f:section name="content">


    
        
    <div class="abstand-klein"></div>
    <f:link.action class="knopfersatz knopf-s2" action="csv">Alle Personen in einem CSV</f:link.action>
    <div class="abstand-gross"></div>
    <!-- <h1>Suche</h1> -->
    <f:form action="index" name="search" object="{search}">

        <div>
            <label for="searchword">
                Nachname (oder Teil davon): &nbsp;&nbsp;
                <f:form.textfield property="searchword" id="searchword" />
            </label>
            <label for="trPid">
                Träger: &nbsp;&nbsp;
                 <f:form.select property="trPid" id="trPid" options="{tr}" prependOptionValue="-1" prependOptionLabel=""/>
            </label>
        </div>

        <f:form.submit class="knopf-s" value="Suchen"/>
    </f:form>
    <f:if condition="{search.used}">
        <h3>TRAINER</h3>
        <f:if condition="{trainer}">
            <f:then>
                <table class="personensuche">
                    <tbody>
                    <f:groupedFor as="groupedTrainer" groupBy="trainerName" groupKey="trainerName" each="{trainer}" >
                        <f:variable name="first">{groupedTrainer -> ieb:firstArray()}</f:variable>
                         <tr>
                            <td class="name td-knopf">{trainerName} &nbsp;&nbsp;&nbsp;<f:link.action action="show" pageUid="213" target="_blank"  controller="Trainer" arguments="{trainer : first.uid}" class="knopf-quadratisch show" title="{trainerName} zeigen"></f:link.action> </td>
                            <td class="organisation">
                                
                                <f:if condition="{first.stammdatenMarkenname}">
                                    <f:then>
                                        {first.stammdatenMarkenname} ({first.stammdatenName})
                                    </f:then>
                                    <f:else>
                                        {first.stammdatenName}
                                    </f:else>
                                </f:if>
                            </td>
                            <td> <label>babi: &nbsp;</label>
                                <f:switch expression="{first.review_c21_babi_status}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="Babi: anerkannt für Qualifikationsnachweis"></span></f:case>
                                    <f:case value="3"><span class="titleview knopfrund auflage-3" title="Babi: Auflage für Qualifikationsnachweis"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="Babi: nicht-ok für Qualifikationsnachweis"></span></f:case>
                                </f:switch>
                                <f:switch expression="{first.review_c22_babi_status}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="Babi: anerkannt für Erfahrungsnachweis"></span></f:case>
                                    <f:case value="3"><span class="titleview knopfrund auflage-3" title="Babi: Auflage für Erfahrungsnachweis"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="Babi: nicht-ok für Erfahrungsnachweis"></span></f:case>
                                </f:switch>
                                <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psa &nbsp;</label>
                                <f:switch expression="{first.review_c21_psa_status}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="Babi: anerkannt für Qualifikationsnachweis"></span></f:case>
                                    <f:case value="3"><span class="titleview knopfrund auflage-3" title="Babi: Auflage für Qualifikationsnachweis"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="Babi: nicht-ok für Qualifikationsnachweis"></span></f:case>
                                </f:switch>
                                <f:switch expression="{first.review_c22_psa_status}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="Babi: anerkannt für Erfahrungsnachweis"></span></f:case>
                                    <f:case value="3"><span class="titleview knopfrund auflage-3" title="Babi: Auflage für Erfahrungsnachweis"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="Babi: nicht-ok für Erfahrungsnachweis"></span></f:case>
                                </f:switch>
                            </td>
                            <td class="ansuchen">
                                <ul>
                                <f:for each="{groupedTrainer}" as="groupItem">



                                            <li class="td-knopf">
                                                <f:if condition="{groupItem.ansuchenNummer}==''">
                                                    <f:then>
                                                        –
                                                    </f:then>
                                                    <f:else>
                                                        {groupItem.ansuchenNummer}&nbsp;&nbsp;&nbsp;
                                                <f:link.action action="show" pageUid="21" target="_blank"  controller="Ansuchen" arguments="{ansuchen : groupItem.ansuchenUid}" class="knopf-quadratisch show" title="Ansuchen »{groupItem.ansuchenName}« zeigen"></f:link.action>
                                                    </f:else>
                                                </f:if>
                                                
                                            </li>


                                    
                                </f:for>
                                </ul>
                            </td>

                        </tr>
                    </f:groupedFor>

                    </tbody>
                </table>
            </f:then>
            <f:else>
                <div>Keine Trainer gefunden</div>
            </f:else>
        </f:if>

        <h3>&nbsp;<br>BERATER</h3>
        <f:if condition="{berater}">
            <f:then>
                <table class="personensuche">
                    <tbody>
                        <f:groupedFor as="groupedBerater" groupBy="beraterName" groupKey="beraterName" each="{berater}" >
                            <f:variable name="first">{groupedBerater -> ieb:firstArray()}</f:variable>
                             <tr>
                                <td class="name td-knopf">{beraterName} &nbsp;&nbsp;&nbsp;<f:link.action action="show" pageUid="213" target="_blank"  controller="Berater" arguments="{berater : first.uid}" class="knopf-quadratisch show" title="{beraterName} zeigen"></f:link.action></td>
                                <td class="organisation">
                                    
                                    <f:if condition="{first.stammdatenMarkenname}">
                                        <f:then>
                                            {first.stammdatenMarkenname} ({first.stammdatenName})
                                        </f:then>
                                        <f:else>
                                            {first.stammdatenName}
                                        </f:else>
                                    </f:if>
                                </td>
                                <td>
                                    <f:switch expression="{first.review_c3_status}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="anerkannt für Qualifikationsnachweis"></span></f:case>
                                    <f:case value="3"><span class="titleview knopfrund auflage-3" title="Auflage für Qualifikationsnachweis"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="nicht-ok für Qualifikationsnachweis"></span></f:case>
                                </f:switch>
                                <f:switch expression="{first.review_c32_status}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="anerkannt für Erfahrungsnachweis"></span></f:case>
                                    <f:case value="3"><span class="titleview knopfrund auflage-3" title="Auflage für Erfahrungsnachweis"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="nicht-ok für Erfahrungsnachweis"></span></f:case>
                                </f:switch>
                                </td>
                                <td class="ansuchen">
                                    <ul>
                                    <f:for each="{groupedBerater}" as="groupItem">
                                        <li class= "td-knopf">
                                            <f:if condition="{groupItem.ansuchenNummer}==''">
                                                    <f:then>
                                                        –
                                                    </f:then>
                                                    <f:else>
                                                        {groupItem.ansuchenNummer}&nbsp;&nbsp;&nbsp;
                                            <f:link.action action="show" pageUid="21" target="_blank"  controller="Ansuchen" arguments="{ansuchen : groupItem.ansuchenUid}" class="knopf-quadratisch show" title="Ansuchen »{groupItem.ansuchenName}« zeigen"></f:link.action>
                                                    </f:else>
                                                </f:if>
                                            
                                        </li>
                                    </f:for>
                                    </ul>
                                </td>
    
                            </tr>
                        </f:groupedFor>
    
                        </tbody>
                    
                </table>
            </f:then>
            <f:else>
                <div>Keine Berater gefunden</div>
            </f:else>
        </f:if>


        <h3>&nbsp;<br>PROJEKTLEITUNG</h3>
        <f:if condition="{angebotverantwortlich}">
            <f:then>

                <table class="personensuche">
                    <tbody>
                        <f:groupedFor as="groupedAngebotverantwortlich" groupBy="angebotVerantwortlichName" groupKey="angebotVerantwortlichName" each="{angebotverantwortlich}" >
                            <f:variable name="first">{groupedAngebotverantwortlich -> ieb:firstArray()}</f:variable>
                            <f:if condition="{first.ansuchenNummer}">
                             <tr>
                                <td class="name td-knopf">{angebotVerantwortlichName} &nbsp;&nbsp;&nbsp;</td>
                                <td class="organisation">
                                    
                                    <f:if condition="{first.stammdatenMarkenname}">
                                        <f:then>
                                            {first.stammdatenMarkenname} ({first.stammdatenName})
                                        </f:then>
                                        <f:else>
                                            {first.stammdatenName}
                                        </f:else>
                                    </f:if><br>
                                    <a href="mailto:{first.email}">{first.email}</a>&nbsp;&nbsp;&nbsp;Tel.: {first.telefon}
                                </td>
                                <td>
                                    <f:switch expression="{first.review_c1_babi}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="Managament: ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="Managament: ok"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="Managament: nicht-ok"></span></f:case>
                                </f:switch>
                                <f:switch expression="{first.review_c1_psa}">
                                    <f:case value="0"><span class="titleview knopfrund in-begutachtung" title="Pädagogik: ohne Begutachtung"></span></f:case>
                                    <f:case value="1"><span class="titleview knopfrund auflage-1" title="Pädagogik: ok"></span></f:case>
                                    <f:case value="4"><span class="titleview knopfrund auflage-4" title="Pädagogik: nicht-ok"></span></f:case>
                                </f:switch>
                                </td>
                                <td class="ansuchen">
                                    <ul>
                                    <f:for each="{groupedAngebotverantwortlich}" as="groupItem">
                                        <li class= "td-knopf">
                                            <f:if condition="{groupItem.ansuchenNummer}==''">
                                                    <f:then>
                                                        –
                                                    </f:then>
                                                    <f:else>
                                                        {groupItem.ansuchenNummer}&nbsp;&nbsp;&nbsp;
                                            <f:link.action action="show" pageUid="21" target="_blank"  controller="Ansuchen" arguments="{ansuchen : groupItem.ansuchenUid}" class="knopf-quadratisch show" title="Ansuchen »{groupItem.ansuchenName}« zeigen"></f:link.action>
                                                    </f:else>
                                                </f:if>
                                            
                                        </li>
                                    </f:for>
                                    </ul>
                                </td>
    
                            </tr>
                        </f:if>
                        </f:groupedFor>
    
                        </tbody>
                    
                </table>
            </f:then>
            <f:else>
                <div>Keine Berater gefunden</div>
            </f:else>
        </f:if>

    </f:if>

</f:section>

</html>